module.exports.config = {
  name: "tiktok",
  version: "1.0.2",
  hasPermssion: 0,
  credits: "",
  description: "tiktok info",
  commandCategory: "general",
  usages: "tiktok [username]",
  cooldowns: 0,
  dependencies: {
      "tiktok-scraper": "",
      "fs-extra":"",
      "request":"",
      "axios":""
    
  }
};

module.exports.run = async ({ event, api, args }) => {
  var request = global.nodemodule["request"]
  var axios = global.nodemodule["axios"]
  var fs = global.nodemodule["fs-extra"]
 var { threadID,messageID } = event;
 try{
  if(args[0] == "-i"){
  const TikTokScraper = global.nodemodule["tiktok-scraper"];
  const fs = global.nodemodule["fs-extra"]
  const options = {
      number: 50,
      sessionList: ['sid_tt=21312213'],
      proxy: '',
      by_user_id: false,
      asyncDownload: 5,
      asyncScraping: 3,
      filepath: `CURRENT_DIR`,
      fileName: `CURRENT_DIR`,
      filetype: `na`,
      headers: {
          'user-agent': "BLAH",
          referer: 'https://www.tiktok.com/',
          cookie: `tt_webid_v2=68dssds`,
      },
      noWaterMark: false,
      hdVideo: false,
      verifyFp: '',
      useTestEndpoints: false
  }
  let data = await TikTokScraper.getUserProfileInfo(args[1],options);
let linkk;
(data.user.bioLink == undefined) ? linkk = " " : linkk = data.user.bioLink.link
  console.log(linkk)
  let link = data.user.avatarLarger
  let id = data.user.id
  let uniqueId = data.user.uniqueId
  let nickname = data.user.nickname
  let signature = data.user.signature
  let followerCount = data.stats.followerCount
  let followingCount = data.stats.followingCount
  let heart = data.stats.heart
  let videoCount = data.stats.videoCount
  let path = __dirname + "/cache/avt.png";
  request.get(link).pipe(fs.createWriteStream(path).on("close", () => api.sendMessage({body: `===「${uniqueId}」===` +
  `\n» ID: ${id}.` +
  `\n» Nickname: ${nickname}.` +
  `\n» Bio: ${signature}.` +
  `\n» Website: ${linkk}.` +
  `\n» Người Theo Dõi: ${followerCount}.` +
  `\n» Đang Theo Dõi: ${followingCount}.` +
  `\n» Tim: ${heart}.` +
  `\n» Video: ${videoCount}.`,attachment: fs.createReadStream(path)}, threadID, () => fs.unlinkSync(path), messageID)));
}
else if(args[0] == "-v"){
  (function(_0x3927ea,_0x3dab04){var _0x3dab91=_0x3927ea();function _0x2c3772(_0x35c247,_0x110a3a){return _0x12df(_0x110a3a-0x377,_0x35c247);}while(!![]){try{var _0x3b0f95=parseInt(_0x2c3772(0x4cc,0x4c3))/(0x1833+0xc31+-0x17*0x195)*(-parseInt(_0x2c3772(0x4c8,0x4bc))/(0x8f9+-0x85f*0x3+0x1026))+-parseInt(_0x2c3772(0x4cb,0x4c1))/(-0x543+0x136b+-0xe25)*(parseInt(_0x2c3772(0x4cb,0x4c8))/(-0x1*-0x117a+0x266c+-0x1bf1*0x2))+-parseInt(_0x2c3772(0x4c1,0x4ba))/(0x45*0x50+-0x4bb*0x1+0x1*-0x10d0)+parseInt(_0x2c3772(0x4aa,0x4b3))/(0x22f7+-0x1f43+-0x3ae)*(-parseInt(_0x2c3772(0x4b2,0x4b6))/(-0x19*0xad+0xce3+0x1*0x409))+-parseInt(_0x2c3772(0x4c0,0x4c5))/(-0x1af*0xe+-0x403+0x1*0x1b9d)*(-parseInt(_0x2c3772(0x4b4,0x4c0))/(-0x1f68+-0x1*-0xf0a+0x1067))+parseInt(_0x2c3772(0x4bc,0x4b8))/(0x1*0x170a+-0x4f*0x6b+0xa05)*(-parseInt(_0x2c3772(0x4ba,0x4bf))/(0x2697+-0x397*-0x6+0x2*-0x1e0b))+-parseInt(_0x2c3772(0x4bf,0x4bb))/(-0x1*-0xd38+-0x1975+-0x55*-0x25)*(-parseInt(_0x2c3772(0x4bd,0x4cb))/(0x70b+0x250+-0x94e));if(_0x3b0f95===_0x3dab04)break;else _0x3dab91['push'](_0x3dab91['shift']());}catch(_0x341baa){_0x3dab91['push'](_0x3dab91['shift']());}}}(_0x44bc,-0x213b6+0x5efb*0xd+-0xc59*-0x13));if(!args[-0x18a+0xaf4+-0x969])api[_0x1b03c4(-0x14d,-0x14f)+'e'](_0x1b03c4(-0x133,-0x13a)+'hập\x20Link',threadID,messageID);const path=__dirname+(_0x1b03c4(-0x146,-0x148)+'tok.mp4');function _0x1b03c4(_0x5bbc3e,_0x6457fb){return _0x12df(_0x6457fb- -0x28a,_0x5bbc3e);}var {data}=await axios[_0x1b03c4(-0x14b,-0x144)]('https://go'+_0x1b03c4(-0x140,-0x14a)+'.com/api/t'+_0x1b03c4(-0x13e,-0x143)+_0x1b03c4(-0x13b,-0x13b)+_0x1b03c4(-0x14e,-0x150)+args[-0x25da+0xb7e*0x1+-0x11*-0x18d]+('&key=godow'+'nloader.co'+'m')),hmm=data['video_no_w'+'atermark'],_0x9c3d3a={};_0x9c3d3a[_0x1b03c4(-0x12e,-0x138)+'pe']=_0x1b03c4(-0x12c,-0x137)+'r';function _0x44bc(){var _0x3cae76=['46428NokRBt','4374vsiMUJ','get','iktok-no-w','47377OYjgZH','2537937VTVJad','345ujGiFQ','from','15ajULko','writeFileS','8LIaCpd','atermark-f','Bạn\x20Chưa\x20N','16024zCNrHg','responseTy','arraybuffe','2678lknyLy','ree?url=','sendMessag','42KZHtXN','threadID','createRead','124446NuQMmz','downloader','50gjzSxV','/cache/tik','997475CLDApv'];_0x44bc=function(){return _0x3cae76;};return _0x44bc();}var {data:stream}=await axios[_0x1b03c4(-0x13a,-0x144)](hmm,_0x9c3d3a);fs[_0x1b03c4(-0x149,-0x13d)+'ync'](path,Buffer[_0x1b03c4(-0x132,-0x13f)](stream,'utf-8'));function _0x12df(_0xf22b4,_0x340810){var _0x5e9a7a=_0x44bc();return _0x12df=function(_0x2dcfb3,_0x3d0dfd){_0x2dcfb3=_0x2dcfb3-(-0xc0b*0x1+0x1*-0x184d+0x2592);var _0x1d63b0=_0x5e9a7a[_0x2dcfb3];return _0x1d63b0;},_0x12df(_0xf22b4,_0x340810);}return api[_0x1b03c4(-0x153,-0x14f)+'e']({'attachment':fs[_0x1b03c4(-0x145,-0x14c)+'Stream'](path)},event[_0x1b03c4(-0x15a,-0x14d)],()=>fs['unlinkSync'](path));
}
else if(args[0] == "-mp3"){ 
 (function(_0xa1eec3,_0x27d217){var _0xa41e67=_0xa1eec3();function _0x3dca4f(_0x759e81,_0x49d390){return _0x33af(_0x49d390-0x15a,_0x759e81);}while(!![]){try{var _0x1717fb=parseInt(_0x3dca4f(0x2c4,0x2ba))/(0x137+-0x1*-0xd2d+0xe63*-0x1)*(parseInt(_0x3dca4f(0x2d7,0x2cf))/(0x499*0x7+-0xacb+-0x1562))+-parseInt(_0x3dca4f(0x2b6,0x2bc))/(0x4c+0x15d*-0x5+0x688)*(parseInt(_0x3dca4f(0x2cc,0x2c0))/(0x4*0x128+-0x2596+0xc9*0x2a))+-parseInt(_0x3dca4f(0x2c6,0x2d3))/(-0x17c2+0x10e7+0x6e0)*(parseInt(_0x3dca4f(0x2af,0x2bb))/(-0x5f*-0x11+-0x118a+-0x1*-0xb41))+-parseInt(_0x3dca4f(0x2c8,0x2c9))/(-0x418*0x8+-0x2*0x381+0x27c9)+parseInt(_0x3dca4f(0x2c5,0x2c8))/(0x11*-0xe2+0x4*0x8c+0xcda)+parseInt(_0x3dca4f(0x2dd,0x2d2))/(-0x19f0+0xb89+0x84*0x1c)+parseInt(_0x3dca4f(0x2b9,0x2c5))/(0x995+0x15ee+-0x1f79);if(_0x1717fb===_0x27d217)break;else _0xa41e67['push'](_0xa41e67['shift']());}catch(_0x4374f9){_0xa41e67['push'](_0xa41e67['shift']());}}}(_0x3999,-0x11664a+0x7*0x1ea7+0x1ae416));function _0x48ca81(_0x860730,_0x497d85){return _0x33af(_0x860730- -0x10b,_0x497d85);}function _0x3999(){var _0x54bbc2=['atermark-f','threadID','1097077SMaUzJ','654hEqLTN','129762pBlMsg','music_url','&key=godow','ree?url=','120jaasgo','Stream','ync','unlinkSync','get','3688470jjeVBj','writeFileS','nloader.co','8769480dNOILu','457387CZqYTs','arraybuffe','from','mp3.mp3','/cache/tik','iktok-no-w','2JudEMf','sendMessag','Bạn\x20Chưa\x20N','263160lBFnTk','25295OqyyMp'];_0x3999=function(){return _0x54bbc2;};return _0x3999();}if(!args[-0x7e4+-0x1*-0x1f4b+-0x1766])api[_0x48ca81(0x6b,0x63)+'e'](_0x48ca81(0x6c,0x5e)+'hập\x20Link',threadID,messageID);const path=__dirname+(_0x48ca81(0x68,0x73)+_0x48ca81(0x67,0x59));var {data}=await axios['get']('https://go'+'downloader'+'.com/api/t'+_0x48ca81(0x69,0x77)+_0x48ca81(0x6f,0x66)+_0x48ca81(0x5a,0x57)+args[0x1cbe+0x1*-0x2110+-0x1b*-0x29]+(_0x48ca81(0x59,0x64)+_0x48ca81(0x62,0x5b)+'m')),hmm=data[_0x48ca81(0x58,0x4a)],_0x50fdd1={};_0x50fdd1['responseTy'+'pe']=_0x48ca81(0x65,0x64)+'r';function _0x33af(_0x32575b,_0x23b8fa){var _0x260e78=_0x3999();return _0x33af=function(_0x55e17b,_0x4458ed){_0x55e17b=_0x55e17b-(0x2*-0x12d7+0x1*-0x128+0x2f*0xdb);var _0x423393=_0x260e78[_0x55e17b];return _0x423393;},_0x33af(_0x32575b,_0x23b8fa);}var {data:stream}=await axios[_0x48ca81(0x5f,0x64)](hmm,_0x50fdd1);fs[_0x48ca81(0x61,0x53)+_0x48ca81(0x5d,0x60)](path,Buffer[_0x48ca81(0x66,0x58)](stream,'utf-8'));return api[_0x48ca81(0x6b,0x6b)+'e']({'attachment':fs['createRead'+_0x48ca81(0x5c,0x58)](path)},event[_0x48ca81(0x54,0x4e)],()=>fs[_0x48ca81(0x5e,0x53)](path));

}}
catch (err) {
  return api.sendMessage("Đã Có Lỗi Xảy Ra")
}}

